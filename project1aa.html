<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Easy Finds</title>

<style>
body {
    font-family: 'Segoe UI', Tahoma, sans-serif;
    background: #f0f2f5;
    margin: 0;
    padding: 2rem;
}

/* Navbar */
.navbar {
    background: #fff;
    padding: 1rem;
    display: flex;
    align-items: center;
    justify-content: space-between;
    border-radius: 8px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    margin-bottom: 1rem;
}
.search-bar {
    flex: 1;
    margin: 0 1rem;
}
.search-bar input {
    width: 100%;
    padding: 0.5rem 1rem;
    border-radius: 20px;
    border: 1px solid #ddd;
}
.admin-toggle {
    background: #ff6b6b;
    color: #fff;
    border: none;
    padding: 0.5rem 1rem;
    border-radius: 20px;
    cursor: pointer;
}

/* Admin Panel */
.admin-panel {
    background: #fff;
    padding: 1rem;
    border-radius: 12px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    display: none;
    margin-bottom: 2rem;
}
.admin-panel.show {
    display: block;
}
.form-group {
    margin-bottom: 1rem;
}
.form-group label {
    font-weight: bold;
}
.form-group input,
.form-group textarea {
    width: 100%;
    padding: 0.5rem;
    border-radius: 8px;
    border: 1px solid #ddd;
}
.preview-img {
    width: 100%;
    max-height: 200px;
    object-fit: cover;
    display: none;
    border-radius: 8px;
    margin-top: 0.5rem;
}
.btn {
    padding: 0.5rem 1rem;
    border-radius: 20px;
    border: none;
    cursor: pointer;
}
.btn-success { background: #2ed573; color: #fff; }
.btn-danger { background: #ff4757; color: #fff; }

/* Deals */
.deals-container {
    max-width: 500px;
    margin: auto;
}
.deal-card {
    background: #fff;
    padding: 1rem;
    border-radius: 12px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    margin-bottom: 1.5rem;
    position: relative;
}
.deal-card img {
    width: 100%;
    border-radius: 12px;
}
.deal-title {
    font-weight: bold;
    font-size: 1.1rem;
    margin-top: 0.5rem;
}
.deal-price {
    color: #2ed573;
    font-weight: bold;
    margin-bottom: 0.5rem;
}

/* Buy Button */
.deal-platform {
    width: 100%;
    display: flex;
    justify-content: center;
}
.deal-platform a {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    padding: 0.8rem;
    background: linear-gradient(90deg, #667eea, #764ba2);
    color: white;
    text-decoration: none;
    border-radius: 12px;
    font-weight: bold;
}

/* Specs */
.deal-specs {
    margin-top: 0.6rem;
    line-height: 1.5;
    font-size: 0.95rem;
}

/* Admin delete */
.admin-options {
    position: absolute;
    top: 10px;
    right: 10px;
    cursor: pointer;
    font-size: 20px;
}
</style>
</head>

<body>

<div class="navbar">
    <div>Easy Finds</div>
    <div class="search-bar">
        <input type="search" id="searchInput" placeholder="Search deals...">
    </div>
    <button class="admin-toggle" id="adminToggle">üõ°Ô∏è</button></button>
</div>

<div class="admin-panel" id="adminPanel">
    <h3>Add New Deal</h3>

    <div class="form-group">
        <label>Product Title</label>
        <input type="text" id="title">
    </div>

    <div class="form-group">
        <label>Price</label>
        <input type="text" id="price">
    </div>

    <div class="form-group">
        <label>Platform Name</label>
        <input type="text" id="platformName" placeholder="Amazon / Flipkart">
    </div>

    <div class="form-group">
        <label>Platform Link</label>
        <input type="url" id="platformLink">
    </div>

    <div class="form-group">
        <label>Specs (press Enter for next line)</label>
        <textarea id="specs" rows="4"></textarea>
    </div>

    <div class="form-group">
        <label>Image Upload</label>
        <input type="file" id="imageFile" accept="image/*">
        <img id="previewImg" class="preview-img">
    </div>

    <button class="btn btn-success" id="addDeal">Add Deal</button>
    <button class="btn btn-danger" id="clearAll">Clear All</button>
</div>

<div class="deals-container" id="dealsContainer"></div>

<script>
const ADMIN_EMAIL = "rakeshreddy7929@gmail.com";
const ADMIN_PASSWORD = "r@kesh123";

const adminToggle = document.getElementById("adminToggle");
const adminPanel = document.getElementById("adminPanel");
const dealsContainer = document.getElementById("dealsContainer");
const addDealBtn = document.getElementById("addDeal");
const clearAllBtn = document.getElementById("clearAll");
const searchInput = document.getElementById("searchInput");
const imageFile = document.getElementById("imageFile");
const previewImg = document.getElementById("previewImg");

let deals = JSON.parse(localStorage.getItem("deals")) || [];
let adminMode = false;

/* Admin Login */
adminToggle.onclick = () => {
    if (!adminMode) {
        const email = prompt("Enter admin email:");
        if (email !== ADMIN_EMAIL) return alert("Wrong email");
        const pass = prompt("Enter admin password:");
        if (pass !== ADMIN_PASSWORD) return alert("Wrong password");

        adminMode = true;
        adminPanel.classList.add("show");
        adminToggle.textContent = "Close";
    } else {
        adminMode = false;
        adminPanel.classList.remove("show");
        adminToggle.textContent = "üõ°Ô∏è";
    }
    renderDeals();
};

/* Image preview */
imageFile.onchange = () => {
    const reader = new FileReader();
    reader.onload = e => {
        previewImg.src = e.target.result;
        previewImg.style.display = "block";
    };
    reader.readAsDataURL(imageFile.files[0]);
};

/* Add deal */
addDealBtn.onclick = () => {
    const deal = {
        title: title.value,
        price: price.value,
        platformName: platformName.value,
        platformLink: platformLink.value,
        specs: specs.value,
        image: previewImg.src
    };
    deals.unshift(deal);
    localStorage.setItem("deals", JSON.stringify(deals));
    renderDeals();
};

/* Render deals */
function renderDeals(list = deals) {
    dealsContainer.innerHTML = "";

    list.forEach((deal, index) => {
        let buyText = "Buy Now";
        const p = deal.platformName.toLowerCase();
        if (p.includes("amazon")) buyText = "Buy on Amazon";
        else if (p.includes("flipkart")) buyText = "Buy on Flipkart";

        const div = document.createElement("div");
        div.className = "deal-card";
        div.innerHTML = `
            ${adminMode ? `<div class="admin-options" onclick="deleteDeal(${index})">‚ãÆ</div>` : ""}
            <img src="${deal.image}">
            <div class="deal-title">${deal.title}</div>
            <div class="deal-price">${deal.price}</div>

            <div class="deal-platform">
                <a href="${deal.platformLink}" target="_blank">${buyText}</a>
            </div>

            <div class="deal-specs">
                ${deal.specs.replace(/\n/g, "<br>")}
            </div>
        `;
        dealsContainer.appendChild(div);
    });
}

function deleteDeal(i) {
    if (confirm("Delete this deal?")) {
        deals.splice(i, 1);
        localStorage.setItem("deals", JSON.stringify(deals));
        renderDeals();
    }
}

/* Search */
searchInput.oninput = e => {
    const q = e.target.value.toLowerCase();
    const filtered = deals.filter(d =>
        d.title.toLowerCase().includes(q) ||
        d.platformName.toLowerCase().includes(q)
    );
    renderDeals(filtered);
};

renderDeals();
</script>

</body>
</html>